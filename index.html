<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Menu</title>
  </head>
  <body>
    <header class="menu_header">
      <div class="menu_div">
        <img
          class="menu_image"
          src="https://misericordia.org.br/site/wp-content/uploads/2021/12/Logotipo.png"
          alt="logo-santuario"
        />
        <nav class="menu_nav menu_nav_coming">
          <ul class="menu_ul"></ul>
        </nav>
        <div class="menu_icons">
          <img
            onclick="loja()"
            src="https://stg.misericordia.org.br/site/wp-content/uploads/2021/12/shop-sacolinha.png"
            alt="sacola"
          />
          <p>|</p>
          <img
            onclick="youtube()"
            src="https://stg.misericordia.org.br/site/wp-content/uploads/2021/12/youtube-5.png"
            alt=""
          />
        </div>
        <div class="menu_mobile">
          <div class="menu_container">
            <img
              onclick="dropMenu()"
              src="https://misericordia.org.br/site/wp-content/uploads/2022/07/Vector.png"
              alt="menu"
            />
            <div class="menu_drop">
              <ul class="menu_drop_ul"></ul>
            </div>
          </div>
        </div>
      </div>
    </header>
  </body>

  <script>
    const corsAnywhere = "https://corsanywhere.herokuapp.com/";
    const target = "https://misericordia.org.br/menu-global-iframe/";
    const url = `${corsAnywhere}${target}`;

    fetch(url)
      .then((response) => response.text())
      .then((response) => scraping(response, "text/html"))
      .catch((err) => console.log(err));

    function scraping(string_html, content_type) {
      let parser = new DOMParser();
      let doc = parser.parseFromString(string_html, content_type);
      const nav = doc.querySelector("#menu-menuglobal").querySelectorAll("a");
      const menu_ul = document.querySelector(".menu_ul");
      const menuDropUl = document.querySelector(".menu_drop_ul");

      [...nav].forEach((element) => {
        const li = document.createElement("li");
        const liMenu = document.createElement("li");
        const aMenu = document.createElement("a");
        const a = document.createElement("a");
        const className = element.innerText
          .normalize("NFD")
          .replace(/[\u0300-\u036f]/g, "")
          .toLowerCase();
        a.classList.add(className);
        aMenu.classList.add(className);
        a.href = element.href;
        aMenu.href = element.href;
        a.innerText = element.innerText;
        aMenu.innerText = element.innerText;
        if (
          window.location.href.includes("Formação") &&
          className === "formacao"
        ) {
          li.style.color = "#184FA7";
          const image = document.querySelector(".menu_image");
          image.src =
            "https://misericordia.org.br/site/wp-content/uploads/2021/12/Logotipo_1.png";
        } else if (
          window.location.href.includes("Notícias") &&
          className === "noticias"
        ) {
          li.style.color = "#DC3A23";
          const image = document.querySelector(".menu_image");
          image.src =
            "https://misericordia.org.br/site/wp-content/uploads/2021/12/Logotipo_2.png";
        } else if (
          window.location.href.includes("Santuário") &&
          className === "santuario"
        ) {
          li.style.color = "#234E76";
          const image = document.querySelector(".menu_image");
          image.src =
            "https://misericordia.org.br/site/wp-content/uploads/2021/12/Logotipo_5.png";
        } else if (
          window.location.href.includes("Marianos") &&
          className === "marianos"
        ) {
          li.style.color = "#009BDB";
          const image = document.querySelector(".menu_image");
          image.src =
            "https://misericordia.org.br/site/wp-content/uploads/2021/12/Logotipo_4.png";
        } else if (
          window.location.href.includes("Eventos") &&
          className === "eventos"
        ) {
          li.style.color = "#009A82";
          const image = document.querySelector(".menu_image");
          image.src =
            "https://misericordia.org.br/site/wp-content/uploads/2021/12/Logotipo-1.png";
        } else if (
          window.location.href === "https://misericordia.org.br/" &&
          className === "portal"
        ) {
          li.style.color = "#9F3B69";
          const image = document.querySelector(".menu_image");
          image.src =
            "https://misericordia.org.br/site/wp-content/uploads/2021/12/Logotipo.png";
        }

        li.append(a);
        liMenu.append(aMenu);

        menuDropUl.append(liMenu);
        menu_ul.append(li);
      });
    }

    function dropMenu() {
      const menuDrop = document.querySelector(".menu_drop");
      if (menuDrop.style.display === "block") {
        menuDrop.style.display = "none";
      } else {
        menuDrop.style.display = "block";
      }
    }

    function fimDaPagina() {
      window.scrollTo(0, document.body.scrollHeight);
    }

    function loja() {
      window.location.href = "https://www.editoradivinamisericordia.com/";
    }

    function youtube() {
      window.open(
        "https://www.youtube.com/user/apostolomisericordia",
        "_blank"
      );
    }
  </script>
  <style>
    @keyframes going {
      from {
        transform: translateY(0);
      }
      to {
        transform: translateY(-20px);
        opacity: 0;
      }
    }

    @keyframes coming {
      from {
        transform: translateY(-20px);
        opacity: 0;
      }
      to {
        transform: translateY(0px);
        opacity: 1;
      }
    }

    .menu_header {
      display: flex;
      justify-content: center;
    }

    .menu_div {
      display: flex;
      justify-content: space-around;
      width: 80%;
    }

    .menu_nav_going {
      display: none;
      align-items: center;
      animation: going 0.5s;
      animation-timing-function: cubic-bezier(0.77, 0, 0.175, 1);
    }

    .menu_nav_coming {
      display: none;
      align-items: center;
      animation: coming 0.5s;
      animation-timing-function: cubic-bezier(0.77, 0, 0.175, 1);
    }

    .menu_image {
      width: 80px;
      height: 94px;
    }
    .menu_ul {
      display: flex;
      width: 60vw;
    }
    .menu_ul li {
      font-family: Roboto;
      font-style: normal;
      font-weight: 500;
      font-size: 15px;
      line-height: 24px;
      color: #515b63;
      padding-left: 10px;
      list-style: none;
      cursor: pointer;
    }

    .menu_ul li a,
    a:hover,
    a:focus,
    a:active {
      text-decoration: none;
      color: inherit;
      padding-bottom: 10px;
      border-bottom: 0 solid;
    }

    .menu_ul li a:hover {
      transition: 0.5s ease-in-out;
      color: #234e76;
      border-bottom: 2px solid #611437;
    }

    .menu_icons {
      display: none;
      align-items: center;
      width: 15%;
    }

    .menu_icons img {
      width: 17px;
      height: 18px;
      padding: 10px;
      cursor: pointer;
    }
    .menu_mobile {
      display: flex;
      align-items: center;
    }

    .menu_mobile img {
      color: #0f2b4e;
    }
    .menu_container {
      width: 24px;
      height: 19px;
      position: relative;
      display: inline-block;
      padding: 0 10px;
      color: #0f2b4e;
    }

    .menu_mobile_p {
      display: block;
    }

    .menu_drop {
      display: none;
      position: absolute;
      font-weight: 700;
      background-color: #f9f9f9;
      min-width: 160px;
      box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
      padding: 12px 16px;
      z-index: 1;
      width: 270px;
      left: -170px;
      overflow-y: scroll;
    }
    .menu_drop h3 {
      font-family: Open Sans, Arial, sans-serif;
      font-size: 14px;
      color: #666;
      font-weight: 700;
      padding: 10px 5%;
      background-color: transparent;
    }
    .menu_drop ul {
      padding: 0;
    }
    .menu_drop li {
      list-style: none;
      padding: 10px 15%;
    }
    .menu_drop li a {
      font-family: Open Sans, Arial, sans-serif;
      font-size: 14px;
      color: #666;
      background-color: transparent;
    }
    .menu_drop a,
    a:hover,
    a:focus,
    a:active {
      text-decoration: none;
      color: inherit;
    }
    input {
      all: unset;
    }

    .menu_scroll {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0 10px;
    }

    .menu_form {
      display: flex;
      width: 60vw;
      padding-left: 40px;
    }

    @media (min-width: 980px) {
      .menu_div,
      .menu_nav_coming,
      .menu_search_coming,
      .menu_icons {
        display: flex;
      }

      .menu_container,
      .menu_scroll,
      .menu_mobile_p {
        display: none;
      }
    }
  </style>
</html>
